{"ast":null,"code":"var _jsxFileName = \"/Users/annaonlyone/Desktop/REACT GROUP 83/goit-react-hw-03-image-finder/src/components/App/App/App.jsx\";\nimport React from 'react';\nimport { Component } from 'react';\nimport { ToastContainer, toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport { imagesMaper } from '../../utils/imagesmaper';\nimport { Section } from 'components/Section';\nimport { Searchbar } from '../Searchbar';\nimport { ImageGallery } from 'components/ImageGallery';\nimport { Loader } from 'components/Loader';\nimport { Button } from 'components/Button';\nimport { Container } from './App.styled';\nimport * as API from '../../api/pixabayAPI';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport class App extends Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      images: null,\n      query: '',\n      page: 1,\n      isLoading: false,\n      error: null,\n      totalHits: null\n    };\n\n    this.handelSubmitForm = query => {\n      if (query.trim() === '') {\n        return toast.error('Enter data to search');\n      }\n\n      this.setState({\n        images: [],\n        page: 1,\n        query\n      });\n    };\n\n    this.handleButtomLoad = () => {\n      this.setState(prevState => ({\n        page: prevState.page + 1\n      }));\n    };\n  }\n\n  async componentDidUpdate(_, prevState) {\n    if (prevState.query !== this.state.query || prevState.page !== this.state.page) {\n      this.setState({\n        isLoading: true\n      });\n\n      try {\n        const {\n          hits,\n          totalHits\n        } = await API.fetchImages(this.state.query, this.state.page);\n        this.setState(prevState => {\n          return {\n            images: [...prevState.images, ...imagesMaper(hits)],\n            totalHits\n          };\n        });\n\n        if (totalHits === 0) {\n          toast('Sorry, there are no images matching your search query. Please try again.');\n        }\n\n        if (this.state.page === 1 && totalHits !== 0) {\n          toast(`Hooray! We found ${totalHits} images.`);\n        }\n      } catch (error) {\n        this.setState({\n          error\n        });\n      } finally {\n        this.setState({\n          isLoading: false\n        });\n      }\n    }\n  }\n\n  render() {\n    const {\n      images,\n      isLoading,\n      error,\n      totalHits,\n      page\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(Container, {\n      children: [/*#__PURE__*/_jsxDEV(Searchbar, {\n        onSubmit: this.handelSubmitForm\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Whoops, something went wrong: \", error.message]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 19\n      }, this), /*#__PURE__*/_jsxDEV(Section, {\n        children: [isLoading && /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 25\n        }, this), images && /*#__PURE__*/_jsxDEV(ImageGallery, {\n          images: images\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 22\n        }, this), images && totalHits - page * 12 > 0 && /*#__PURE__*/_jsxDEV(Button, {\n          onClick: this.handleButtomLoad\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ToastContainer, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["/Users/annaonlyone/Desktop/REACT GROUP 83/goit-react-hw-03-image-finder/src/components/App/App/App.jsx"],"names":["React","Component","ToastContainer","toast","imagesMaper","Section","Searchbar","ImageGallery","Loader","Button","Container","API","App","state","images","query","page","isLoading","error","totalHits","handelSubmitForm","trim","setState","handleButtomLoad","prevState","componentDidUpdate","_","hits","fetchImages","render","message"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Component } from 'react';\nimport { ToastContainer, toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\n\nimport { imagesMaper } from '../../utils/imagesmaper';\nimport { Section } from 'components/Section';\nimport { Searchbar } from '../Searchbar';\nimport { ImageGallery } from 'components/ImageGallery';\nimport { Loader } from 'components/Loader';\nimport { Button } from 'components/Button';\nimport { Container } from './App.styled';\n\nimport * as API from '../../api/pixabayAPI';\n\nexport class App extends Component {\n  state = {\n    images: null,\n    query: '',\n    page: 1,\n    isLoading: false,\n    error: null,\n    totalHits: null,\n  };\n\n  async componentDidUpdate(_, prevState) {\n    if (\n      prevState.query !== this.state.query ||\n      prevState.page !== this.state.page\n    ) {\n      this.setState({ isLoading: true });\n\n      try {\n        const { hits, totalHits } = await API.fetchImages(\n          this.state.query,\n          this.state.page\n        );\n\n        this.setState(prevState => {\n          return {\n            images: [...prevState.images, ...imagesMaper(hits)],\n            totalHits,\n          };\n        });\n\n        if (totalHits === 0) {\n          toast(\n            'Sorry, there are no images matching your search query. Please try again.'\n          );\n        }\n        if (this.state.page === 1 && totalHits !== 0) {\n          toast(`Hooray! We found ${totalHits} images.`);\n        }\n      } catch (error) {\n        this.setState({ error });\n      } finally {\n        this.setState({ isLoading: false });\n      }\n    }\n  }\n\n  handelSubmitForm = query => {\n    if (query.trim() === '') {\n      return toast.error('Enter data to search');\n    }\n\n    this.setState({ images: [], page: 1, query });\n  };\n\n  handleButtomLoad = () => {\n    this.setState(prevState => ({ page: prevState.page + 1 }));\n  };\n\n  render() {\n    const { images, isLoading, error, totalHits, page } = this.state;\n\n    return (\n      <Container>\n        <Searchbar onSubmit={this.handelSubmitForm} />\n        {error && <p>Whoops, something went wrong: {error.message}</p>}\n        <Section>\n          {isLoading && <Loader />}\n          {images && <ImageGallery images={images} />}\n\n          {images && totalHits - page * 12 > 0 && (\n            <Button onClick={this.handleButtomLoad} />\n          )}\n        </Section>\n        <ToastContainer />\n      </Container>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}